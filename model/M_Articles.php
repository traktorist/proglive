<?phpclass M_Articles {    private static $instance;    private $mFunctions;    public static function Instance() {        if (self::$instance == null) self::$instance = new self;        return self::$instance;    }    private function __construct() {        $this->mFunctions = M_Functions::Instance();    }    //    // Список всех статей    //    public function articles_all() {        $result = mysql_query("SELECT * FROM `articles` ORDER BY `articles`.`create_date` DESC;");        if (!$result) return false;        // Извлечение из БД.        while ($row = mysql_fetch_array($result)) {            $row['content_intro'] = $this->mFunctions->content_intro($row['content']);            $articles[] = $row;        }        return $articles;    }    //    // Конкретная статья    //    public function get_article($id_article) {        $sql = "SELECT * FROM `articles` JOIN `users` USING (`id_user`) WHERE `articles`.`id_article` = '%d';";        $sql = sprintf($sql, $this->mFunctions->protect($id_article));        $article = mysql_fetch_array(mysql_query($sql));        if (!$article) return false;        return $article;    }    //    // Добавить статью    //    public function new_article($subject, $content) {        // Запрос.        $sql = "INSERT INTO `proglive_php2`.`articles` (    `id_article`,                                                            `subject`,                                                            `content`,                                                            `id_user`,                                                            `create_date`)                                                VALUES (    NULL,                                                            '%s',                                                            '%s',                                                            '1',                                                            '2032-01-01 23:59:59');";        $sql = sprintf($sql, $this->mFunctions->protect($subject), $this->mFunctions->protect($content));        $result = mysql_query($sql);        if (!$result) return false;        $_SESSION['add_success'] = true;        return true;    }    //    // Изменить статью    //    public function edit_article($id_article, $subject, $content) {        $sql = "UPDATE `proglive_php2`.`articles` SET   `subject` = '%s',                                                        `content` = '%s'                                                WHERE   `articles`.`id_article` = '%d';";        $sql = sprintf($sql, $this->mFunctions->protect($subject), $this->mFunctions->protect($content), $this->mFunctions->protect($id_article));        $result = mysql_query($sql);        if (!$result) return false;        $_SESSION['update_success'] = true;        return true;    }    //    // Удалить статью    //    public function delete_article($id_article) {        $sql = "DELETE FROM `proglive_php2`.`articles` WHERE `articles`.`id_article` = '%d';";        $sql = sprintf($sql, $this->mFunctions->protect($id_article));        $result = mysql_query($sql);        if (!$result) return false;        $_SESSION['delete_success'] = true;        return true;    }}?>